---
import Layout from "../layouts/Layout.astro";
import { formatDate } from "../utils/helpers";

const posts = await Astro.glob("./blog/*.md");
posts.sort(
    (a, b) => Date.parse(b.frontmatter.date) - Date.parse(a.frontmatter.date)
);

const paginatedPosts = posts.slice(0, 5);
---

<Layout title="Long Haul Astro Theme">
    <div class="container">
        <h2 class="page-title h1">Recent Posts</h2>
        <div class="post-list no-list">
            {
                paginatedPosts.map((post) => (
                    <article>
                        <time datetime={post.frontmatter.date} class="date">
                            {formatDate(post.frontmatter.date)}
                        </time>
                        <h2 class="h3">
                            <a href={post.url}>{post.frontmatter.title}</a>
                        </h2>
                        <p>{post.frontmatter.description}</p>
                    </article>
                ))
            }
        </div>
    </div>
</Layout>
